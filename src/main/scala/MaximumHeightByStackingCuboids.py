class Solution:
    def maxHeight(self, cuboids):
        A = [sorted(s) for s in cuboids]
        A = [[0,0,0]] + sorted(A)
        dp = [0] * len(A)
        for i in range(1, len(A)):
            for j in range(i):
                if all(A[j][k] <= A[i][k] for k in range(3)):
                    dp[i] = max(dp[i], dp[j] + A[i][2])
        return max(dp)



sol = Solution()
# print(sol.maxHeight(
#     [[2, 51, 2], [71, 44, 77], [42, 26, 29], [4, 3, 24], [47, 47, 81], [11, 2, 28], [64, 72, 72], [75, 74, 18],
#      [10, 67, 13], [6, 87, 45], [93, 22, 50], [60, 37, 78], [48, 9, 51], [25, 84, 1], [7, 75, 94], [76, 79, 70],
#      [14, 55, 5], [9, 44, 54], [49, 66, 62], [48, 28, 52], [37, 11, 7], [41, 43, 28], [72, 54, 94], [4, 19, 85],
#      [81, 46, 72], [63, 90, 28], [41, 47, 4], [81, 64, 97], [1, 48, 78], [65, 55, 37], [43, 74, 99], [16, 40, 66],
#      [90, 15, 83], [54, 47, 53], [98, 63, 50], [74, 36, 19], [10, 2, 10], [95, 35, 28], [76, 87, 75], [60, 63, 55],
#      [75, 87, 2], [16, 59, 74], [67, 19, 27], [13, 22, 57], [13, 16, 37], [84, 53, 80], [70, 13, 1], [65, 100, 22],
#      [70, 78, 8], [70, 82, 78], [58, 29, 23], [34, 51, 40]]))#664
print(sol.maxHeight([[7, 11, 17], [7, 17, 11], [11, 7, 17], [11, 17, 7], [17, 7, 11], [17, 11, 7]]))  # 102
print(sol.maxHeight([[38, 25, 45], [76, 35, 3]]))  # 76
print(sol.maxHeight([[50, 45, 20], [95, 37, 53], [45, 23, 12]]))  # 190
